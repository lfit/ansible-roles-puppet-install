---
- include_tasks: '{{item}}'
  with_first_found:
    - '{{ansible_os_family}}-{{ansible_architecture}}.yml'
    - '{{ansible_distribution}}.yml'
    - '{{ansible_os_family}}.yml'

- name: Symlink facter
  file:
    src: /opt/puppetlabs/bin/facter
    dest: /usr/bin/facter
    state: link
  # yamllint disable-line rule:line-length
  when: ansible_architecture != 'aarch64' and ansible_distribution == 'Ubuntu' and ansible_distribution_version != '18.04'
  become: true

- name: Symlink puppet
  file:
    src: /opt/puppetlabs/puppet/bin/facter
    dest: /usr/bin/puppet
    state: link
  # yamllint disable-line rule:line-length
  when: ansible_architecture != 'aarch64' and ansible_distribution == 'Ubuntu' and ansible_distribution_version != '18.04'
  become: true
